<!DOCTYPE html>
<html id="html">

<head>
	<meta charset="utf-8">
	<title>{{model}}</title>
	<style type="text/css">
	body{
		padding: 1em;
	}
	table{
		border-collapse: collapse;
		margin: 1em 0;
	}
	td {
		border: solid 1px #ddd;
		padding: .5em;
		vertical-align: middle;
	}
	td label{
		display: block;
	}
	.selected{
		color: #0f0
	}
	</style>
</head>

<body>
	<div id="test">
		abc{{model}}waef{{string}}last<b></b>
	</div>
	<div id="app">
		<div id="event">
			<div @click.stop.self="console.log('div')">
				div
				<button>button</button>
				<a href="http://baidu.com" @click.prevent.stop="console.log('a')">baidu</a>
				<input @keyup.13="console.log($event)">
			</div>
		</div>
		<!--  -->
		<table id="base">
			<tr>
				<td><span pre>{{n}}</span>:{{++n}} </td>
				<td>{{compute}}</td>
				<td text="'text:'+model"></td>
				<td html="'html:'+'<b>'+model"></td>
				<td .title="compute">:title</td>
				<td .class={selected:model}>:class</td>
				<td .style="{color:model}">:style</td>
				<td show="model">show</td>
				<td hide="model">hide</td>
				<td>
					<i if="n%2==0">if {{n}}%2==0</i>
					<i elseif="n%3==0">elseif {{n}}%3==0</i>
					<i else>else {{n}}</i>
				</td>
				<td>
					<!-- <img .src="model"> -->
				</td>
				<td>
					<button ref="btn">ref="btn"</button>
				</td>
			</tr>
		</table>
		<!--  -->
		<table id="form">
			<tr>
				<td> <input model="model"> </td>
				<td> <textarea model.number="model"></textarea> </td>
				<td>
					<select model="model" size="4">
						<option for="item in array" :value="item">{{item}}</option>
					</select>
					<select model="array" multiple>
						<option value="value">value</option>
						<option :value="string">string</option>
						<option :value="number">number</option>
						<option :value="object">object</option>
					</select>
				</td>
				<td>
					<input model="model" type="checkbox">
				</td>
				<td>
					<label><input type="checkbox" model="array" value="value">value</label>
					<label><input type="checkbox" model="array" :value="string">string</label>
					<label><input type="checkbox" model="array" :value="number">number</label>
					<label><input type="checkbox" model="array" :value="object">object</label>
				</td>
				<td>
					<label><input type="radio" model="model" value="value">value</label>
					<label><input type="radio" model="model" :value="string">string</label>
					<label><input type="radio" model="model" :value="number">number</label>
					<label><input type="radio" model="model" :value="object">object</label>
				</td>
			</tr>
		</table>
		<!--  -->
		<div id="for">
			<table>
				<tr>
					<td colspan="3" style="text-align:center">
						<input autofocus model="model" @keyup.ctrl.enter.prevent.stop="add(model);model=''">
						<input model.number.lazy="model" @keyup="console.log($event)">
					</td>
				</tr>
				<tr for="(item, i) in list" if="item.status!='delete'">
					<td>x{{i}}/{{list.length}}:{{item.status}}c</td>
					<td>a{{456}}b</td>
					<td :title="item.text">
						<input model="item.text">
					</td>
					<td>
						<button if="item.status!='done'" @click="item.status='done'">done</button>
						<button if="item.status=='done'" @click="item.status='open'">open</button>
						<button @click="del(i)">del</button>
					</td>
				</tr>
			</table>
		</div>
		<!--  -->
		<table id="forObject">
			<tr for="(item, key, index) in object" :key="key">
				<td>{{index}}</td>
				<td>{{key}}</td>
				<td>{{item}}</td>
			</tr>
		</table>
		<!--  -->
		<div id="component">
			<input model="model">
			<div is="counter"></div>
			<counter for="item in list"></counter>
		</div>
		<div id="tree">
			<div is="tree" :data="array"></div>
		</div>
	</div>
	<script src="vm.js"></script>
	<script src="ajax.js"></script>
	<!-- tpl -->
	<div pre style="display:none">
		<div id="counterTpl">
			<span>
				<button @click="n++">{{n}}</button>
			</span>
		</div>
		<div id="treeTpl">
			<ul class="tree">
				<li for="item in data">
					<div @click="item.open=!item.open">
						<span if="item.open">-</span>
						<span else>+</span>
						{{item.value}}
					</div>
					<ul is="tree" if="item.open" :data="item.children"></ul>
				</li>
				<li @click="data.push({value:110,children:[]})">
					<div>+</div>
				</li>
			</ul>
			<style type="text/css">
				.tree{
					list-style: none
				}
				.tree li{
					cursor: pointer;
				}
				.tree li div:hover{
					background: #eee
				}
			</style>
		</div>
	</div>
	<script>
		Vue.component('counter', {
			template: counterTpl.innerHTML,
			data: function() {
				return {
					n: 0
				}
			}
			,
			mounted: function () {
				window.c = this
			}
		})

		Vue.component('tree', {
			template: treeTpl.innerHTML,
			data: function() {
				return {
					data: []
				}
			}
			,
			mounted: function () {
				// console.log(this)
			}
		})
	</script>
	<script>
	/**/
	var list = [
		{ id:1, text:'todo1', status:'open', tags:['abc'] },
		{ id:2, text:'todo2', status:'open', tags:['abc'] }
	]
	// for (var i = 0; i < 5; i++) {
	// 	list.push({
	// 		text: i
	// 	})
	// }

	vm = vue = new Vue({
		// el: '#for',
		data: {
			n: 0,
			string: 'string',
			number: 1,
			boolean: true,
			array: [],
			object: { 
				key: 'value',
				key2: 'valu2'
			},
			model: 'vm.js',
			list: list,
			tree: [
				{
					value: 1,
					children: [
						{
							value: '1.1',
							children: [
								{
									value: '1.1.1'
								}
							]
						},
						{
							value: '1.2'
						}
					]
				}
			],
			compute: function () {
				return 'computed:' + String(this.model).toUpperCase()
			},
			add: function (text) {
				var vue = this

				this.list.push({
					text: text
				})
				setTimeout(function () {
					vue.model += 2
				}, 1000)
			},
			del: function (i) {
				this.list.splice(i, 1)
			}
		}
		,
		mountedx: function(){
			var vue = this
			
			// vue.model = 'mounted'

			var img = new Image
			img.onload = function () {
				vue.model = 'img.onload'
			}
			img.onerror = function () {
				vue.model = 'img.onerror'
			}
			img.src = 'https://cn.vuejs.org/images/logo.png'

			window.setTimeout(function () {
				vue.model = 'sssss1'
			}, 1000)

			// ajax({
			// 	url: './readme.md',
			// 	success: function (res) {
			// 		vue.model = 'res'
			// 	}
			// })
		}
	})
	</script>
</body>

</html>